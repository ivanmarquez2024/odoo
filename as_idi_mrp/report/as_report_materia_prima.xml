<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <template id="label_materia_prima_view_pdf">
            <t t-call="web.basic_layout">
                <div class="page">
                    <t t-foreach="docs" t-as="picking">
                        <t t-foreach="picking.move_lines" t-as="move">
                            <t t-set="contador" t-value="1" />
                            <t t-foreach="move.move_line_ids" t-as="move_line">
                            <img t-att-src="image_data_uri(picking.company_id.logo)"
                                        style="height:40px; width: 150px;" />
                            <div style="text-align:center">
                                <h3>MATERIA PRIMA</h3><br/>
                                CODIGO INTERNO: <span t-esc="move.product_id.default_code" /><br/>
                                MATERIAL: <span t-esc="move.product_id.name" /><br/>
                                LOTE: <span t-esc="move_line.as_lot_supplier or move_line.as_lot_supplier" /><br/>
                                FECHA: <t t-if="picking.date_done"><span t-esc="(datetime.datetime.strptime(str(picking.date_done), '%Y-%m-%d %H:%M:%S') - datetime.timedelta(hours=4)).strftime('%d/%m/%Y')" /><br/></t>
                                OBS: <t t-if="move_line.lot_id.note"><span t-esc="picking.get_pobs(move_line.lot_id.note)" /></t><br/>
                                INSPECTOR: <span t-esc="picking.get_partner_id()" /><br/>
                                FECHA CADUCIDAD: 
                                <t t-if="move_line.lot_id.life_date">
                                <span t-esc="(datetime.datetime.strptime(str(move_line.lot_id.life_date), '%Y-%m-%d %H:%M:%S')).strftime('%d/%m/%Y')" />
                                </t> 
                                
                                <br/>
                                                </div>
<br/>
<div class="col-12 text-left">
                                                <img t-att-src="image_data_uri(picking.get_qrcode(str(move.product_id.default_code)+'-'+move.picking_id.name+'-'+picking.get_format(contador)))"
                                                    style="max-height:3.5cm;max-width:3cm;" /><br/>
                                <!-- <t t-esc="picking.get_actualiza_default_code(move_line.lot_id,str(move.product_id.default_code)+'-'+move.picking_id.name+'-'+picking.get_format(contador))"/> -->
                                                    <span style='font-size:12px' t-esc="str(move.product_id.default_code)+'-'+move.picking_id.name+'-'+picking.get_format(contador)" /><br/>
                    </div>
                    <br/><br/>
                     <t t-if="picking.partner_id.as_internacional">
                     <div class="col-12 text-right">
                                 <h2 style="font-size:50px">IMMEX</h2>
                            </div>
                                </t>
                                <t t-if="not picking.partner_id.as_internacional">
<br/><br/>
                                 </t>
                                <br/>
                                <t t-set="contador" t-value="contador+1" />
                        <br/>__________________________________________________  <br/>
                        <div class="row mt0 mb0 ">
                        <div class="col-6 text-left">Firma y Sello </div>
                        <div class="col-6 text-left"><span t-esc="move_line.product_id.product_tmpl_id.as_format_type_id.as_code_iso_lot" /></div>
                        </div>
                                <p style="page-break-before:always;" />

                            </t>
                        </t>
                    </t>
                </div>
            </t>
        </template>

    </data>
</odoo>